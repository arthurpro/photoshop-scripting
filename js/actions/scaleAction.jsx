/* global app:false, File:false, ExportOptionsSaveForWeb:false, SaveDocumentType:false, ExportType:false, SaveOptions:false, UnitValue:false, ResampleMethod:false */(function () {  // ease debugging START  var isDebugging = false;  var currentPath = File($.fileName).path + '/';  if (typeof app.actions === 'undefined') {    // "app.actions" namespace does not exist, switch to standalone debugging    isDebugging = true;    app.actions = {};  }  // ease debugging END  // action START  app.actions.scaleAction = function (config, console) {    // open PSD    var doc = app.open(File(config.processPath + config.filename));  // Get the image size in pixels.    var pixelWidth = new UnitValue(doc.width, 'px');    var pixelHeight = new UnitValue(doc.height, 'px');    var newPixelWidth = 200;    var newPixelHeight = pixelHeight * (newPixelWidth / pixelWidth);    doc.resizeImage(newPixelWidth, newPixelHeight, null, ResampleMethod.BICUBIC);    // export updated PSD for web    (function exportForWeb(filename) {      var exportOptions = new ExportOptionsSaveForWeb();      exportOptions.format = SaveDocumentType.JPEG;      exportOptions.quality = 75;      exportOptions.optimized = true;      try {        doc.exportDocument(filename, ExportType.SAVEFORWEB, exportOptions);      } catch (e) {        console.error('Error saving file. ' + e);      }    }(File(config.processPath + config.filename.split('.')[0] + '.jpg')));    // close PSD document without saving changes    doc.close(SaveOptions.DONOTSAVECHANGES);  };  // action END  // ease debugging START  if (isDebugging) {    app.actions.scaleAction({      'basePath': currentPath + '../../',      'processPath': currentPath + '../../',      'filename': 'test.psd',      'actionPath': currentPath,      'actionName': 'scaleAction'    }, {      log: function (msg) {        $.writeln(msg);      },      error: function (msg) {        $.writeln(msg);      }    });  }  // ease debugging END}());